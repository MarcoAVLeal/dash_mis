# df$Regional       <- str_replace(string = df$Regional,pattern = "Regional Dejamile",replacement = "DEJAMILE SOUZA")
# df$Regional       <- str_replace(string = df$Regional,pattern = "Regional Igor",replacement = "IGOR ASSIS")
#
#
#
# df                <- df %>% mutate("Fase do negocio" = ifelse(`Fase do negocio` == "PAGO AO CLIENTE","PAGO",`Fase do negocio`))
# df                <- df %>% mutate("Fase do negocio" = ifelse(`Fase do negocio` == "EM ANÁLISE","EM ANÁLISE",`Fase do negocio`))
# # df                <- df %>% mutate("Origem do Cliente"  = ifelse(`Origem do Cliente` == "","Não identificada",`Origem do Cliente`),
# #                                    "Fonte"              = ifelse(`Contato Fonte` =="",`Lead Fonte`,`Contato Fonte`),
# #                                    "Origem do Cliente1" = ifelse(`Origem do Cliente` == "Fonte" & `Contato Fonte` == "" & `Lead Fonte` == "","Fonte (erro de tabulação)",ifelse(Fonte != "","Fonte",`Origem do Cliente`)),
# #                                    "Data fechado"       = ifelse(Fechado == "Sim",`Data prevista de fechamento`, NA),
# #                                    "Data criado"        = ifelse(`Origem do Cliente1` == "Fonte"| `Origem do Cliente1` =="Não identificada",NA,`Criado em`))
#
# df                <- df %>% mutate("Origem do Cliente"  = ifelse(`Origem do Cliente` == "" | is.na(`Origem do Cliente`) | `Origem do Cliente` == "NA"  ,"Não identificada",`Origem do Cliente`),
#                                    # "Fonte"              = ifelse(`Contato Fonte` =="",`Lead Fonte`,`Contato Fonte`),
#                                    "Origem do Cliente1" = ifelse(!is.na(`Contato Fonte`) ,"Fonte", `Origem do Cliente`),
#                                    "Data fechado"       = ifelse(`Fase do negocio` == "PAGO" | `Fase do negocio` == "DESAFIO",`Data prevista de fechamento`, NA),
#                                    "Data criado"        = ifelse(`Origem do Cliente1` == "Fonte" | `Origem do Cliente1` =="Não identificada",NA,`Data de inicio`))
#
#
#
# #df$`Criado em`         <- as.Date(df$`Criado em`,format = "%d/%m/%Y")
# df$`Data fechado`       <- lubridate::as_date(df$`Data fechado` , format = "%Y-%m-%d %H:%M:%S")
# df$`Data analisar`      <- lubridate::as_date(df$`Data analisar`, format = "%Y-%m-%d %H:%M:%S")
# df$`Data criado`        <- lubridate::as_date(df$`Data criado`, format = "%Y-%m-%d %H:%M:%S")
# df$`Data negociar`      <- lubridate::as_date(df$`Data negociar`, format = "%Y-%m-%d %H:%M:%S")
# df$`Data prospectar`    <- lubridate::as_date(df$`Data prospectar`, format = "%Y-%m-%d %H:%M:%S")
# df$`Data de inicio`     <- lubridate::as_date(df$`Data de inicio`, format = "%Y-%m-%d %H:%M:%S")
# df$`Modificado em`      <- lubridate::as_date(df$`Modificado em` , format = "%Y-%m-%d %H:%M:%S")
df1 <- df
runApp()
#rm(list=ls())
library(shiny)
library(shinyWidgets)
library(shinydashboard)
library(shinydashboardPlus)
library(dplyr)
library(readxl)
library(stringr)
library(flexdashboard)
library(ggplot2)
library(plotly)
library(rmarkdown)
library(pagedown)
library(stringr)
library(RODBC)
library(RMySQL)
library(RMariaDB)
library(ggtext)
library(fresh)
library(shinyWidgets)
library(shinycssloaders)
library(DT)
library(reshape2)
library(plyr)
library(tidyverse)
#source(file = "funcoes.R",encoding = "UTF-8")
read_url_csv <- function(url, sep = ",",enc = "UTF-8"){
tmpFile <- tempfile()
download.file(url, destfile = tmpFile)
url_csv <- read.csv(tmpFile, sep = sep,encoding = enc)
return(url_csv)
}
read_url_xlsx <- function(url,sheet = "Calendario"){
tmpFile <- tempfile()
download.file(url, destfile = tmpFile)
url_csv <- read_xlsx(path = tmpFile,sheet = sheet)
return(url_csv)
}
library(readxl)
url <- "https://crefaz-my.sharepoint.com/:x:/g/personal/gestaodedados4_crefaz_onmicrosoft_com/EbsSsZPj4ntMvyRUG-0QYa4BTEQUCw8VXlCqTriyMQcYiw?download=1"
destfile <- "calendario.xlsx"
curl::curl_download(url, destfile)
calendario <- read_excel(destfile,sheet = "Calendario")
calendario         = calendario[c("Dia","Class Não Útil","Dia Útil2")]
colnames(calendario) <- c("Data","Dia_util","Dia_Util2")
calendario$Class_Dia <- is.na(calendario$Dia_util)
calendario$Data      <- as.Date(calendario$Data,format = "%d/%m/%Y")
calendario$Class_Dia <- ifelse(calendario$`Dia_Util2` == "Sábado",TRUE,calendario$Class_Dia)
onedrive_url <- "https://crefaz-my.sharepoint.com/:x:/g/personal/gestaodedados4_crefaz_onmicrosoft_com/ESjlRAy5mzVJh3LRucNvoTYBa5x7ReX2691dJ-5uwaob4w?download=1"
df <- read_url_csv(onedrive_url,enc = "latin1")
names_df          <- c("ID","Tipo","Pipeline", "Fase do negocio","Negocio Recorrente","Negocio Repetido","Contato Fonte","Modificado por ID","Criado por","Pessoa reponsavel ID",
"Data prevista de fechamento","Data de inicio","Valor do emprestimo","Origem do Cliente","Data exportacao","Contato","Grupo de fase" ,
"Base","Produto Crefaz", "Fase automacao",  "Data negociar","Data analisar", "Data prospectar","Modificado em","Desafio","Desafio retencao","primeira_resposta_do_cliente",
"resposta_do_cliente","cpf","retrabalho_desafio","ID_users" , "COD_PR",  "Nomes.e.sobrenomes" ,   "Lojas" ,  "Regional" ,   "active"  ,"Origem do Cliente1",   "Data fechado" ,  "Data criado"
)
View(df_melt)
View(df)
#rm(list=ls())
library(shiny)
library(shinyWidgets)
library(shinydashboard)
library(shinydashboardPlus)
library(dplyr)
library(readxl)
library(stringr)
library(flexdashboard)
library(ggplot2)
library(plotly)
library(rmarkdown)
library(pagedown)
library(stringr)
library(RODBC)
library(RMySQL)
library(RMariaDB)
library(ggtext)
library(fresh)
library(shinyWidgets)
library(shinycssloaders)
library(DT)
library(reshape2)
library(plyr)
library(tidyverse)
#source(file = "funcoes.R",encoding = "UTF-8")
read_url_csv <- function(url, sep = ",",enc = "UTF-8"){
tmpFile <- tempfile()
download.file(url, destfile = tmpFile)
url_csv <- read.csv(tmpFile, sep = sep,encoding = enc)
return(url_csv)
}
read_url_xlsx <- function(url,sheet = "Calendario"){
tmpFile <- tempfile()
download.file(url, destfile = tmpFile)
url_csv <- read_xlsx(path = tmpFile,sheet = sheet)
return(url_csv)
}
library(readxl)
url <- "https://crefaz-my.sharepoint.com/:x:/g/personal/gestaodedados4_crefaz_onmicrosoft_com/EbsSsZPj4ntMvyRUG-0QYa4BTEQUCw8VXlCqTriyMQcYiw?download=1"
destfile <- "calendario.xlsx"
curl::curl_download(url, destfile)
calendario <- read_excel(destfile,sheet = "Calendario")
calendario         = calendario[c("Dia","Class Não Útil","Dia Útil2")]
colnames(calendario) <- c("Data","Dia_util","Dia_Util2")
calendario$Class_Dia <- is.na(calendario$Dia_util)
calendario$Data      <- as.Date(calendario$Data,format = "%d/%m/%Y")
calendario$Class_Dia <- ifelse(calendario$`Dia_Util2` == "Sábado",TRUE,calendario$Class_Dia)
onedrive_url <- "https://crefaz-my.sharepoint.com/:x:/g/personal/gestaodedados4_crefaz_onmicrosoft_com/ESjlRAy5mzVJh3LRucNvoTYBa5x7ReX2691dJ-5uwaob4w?download=1"
df <- read_url_csv(onedrive_url,enc = "latin1")
names_df          <- c("ID","Tipo","Pipeline", "Fase do negocio","Negocio Recorrente","Negocio Repetido","Contato Fonte","Modificado por ID","Criado por","Pessoa reponsavel ID",
"Data prevista de fechamento","Data de inicio","Valor do emprestimo","Origem do Cliente","Data exportacao","Contato","Grupo de fase" ,
"Base","Produto Crefaz", "Fase automacao",  "Data negociar","Data analisar", "Data prospectar","Modificado em","Desafio","Desafio retencao","primeira_resposta_do_cliente",
"resposta_do_cliente","cpf","retrabalho_desafio","ID_users" , "COD_PR",  "Nomes.e.sobrenomes" ,   "Lojas" ,  "Regional" ,   "active"  ,"Origem do Cliente1",   "Data fechado" ,  "Data criado"
)
colnames(df) <- names_df
# library(janitor)
# df  %>%
#   clean_names()
#
# df$`Fase do negocio` <- ifelse(df$`Fase do negocio` == "EM ANÃ\u0081LISE","EM ANÁLISE",df$`Fase do negocio`)
# df$`Pessoa reponsavel ID`          <- as.character(df$`Pessoa reponsavel ID` )
#
# onedrive_url <- "https://crefaz-my.sharepoint.com/:x:/g/personal/gestaodedados4_crefaz_onmicrosoft_com/EZXxlt-n_LxOnG4KTsPLxaIBVslbvDa-2z7_1_-0Y3B1NQ?download=1"
#
# users             <- read_url_csv(onedrive_url,sep = ";",enc = "latin1")
# users$ID          <- as.character(users$ID)
#
# library(readxl)
# url <- "https://crefaz-my.sharepoint.com/:x:/g/personal/gestaodedados4_crefaz_onmicrosoft_com/EaODUUKwdOFJtbyx6MQHshsBjMAYRqYYyXr-el08rDnpxQ?download=1"
# destfile <- "regionais.xlsx"
# curl::curl_download(url, destfile)
# regionais <- read_excel(destfile,sheet = "Planilha1")
#
#
#
#
# df                <- left_join(x = df,y = users,by=c("Pessoa reponsavel ID"="ID"),keep=TRUE,suffix = c("_LEADS","_users"))
# #df                <- left_join(x = df,y = regionais,by=c("Departamento"="Departamento"),keep=TRUE,suffix = c("_LEADS","_reg"))
# colnames(df)[colnames(df) == "Departamento"] <- "Lojas"
#
#
# df                <- df %>% filter(str_detect(string = Lojas,pattern = "Loja CFZ"))
#
#
#
# df$Regional       <- str_replace(string = df$Regional,pattern = "Super. ES 2 Lojas CFZ",replacement = "Supervisao ES Lojas CFZ")
# df$Regional       <- str_replace(string = df$Regional,pattern = "Super. RJ e ES Lojas CFZ",replacement = "MAYSA CARVALHO")
# df$Regional       <- str_replace(string = df$Regional,pattern = "Super. RS Lojas CFZ",replacement = "WAGNER RIBEIRO")
# df$Regional       <- str_replace(string = df$Regional,pattern = "Super. CE lojas CFZ",replacement = "GILBERTO FELICIO")
# df$Regional       <- str_replace(string = df$Regional,pattern = "Super. Lojas SC",replacement = "SC")
# df$Regional       <- str_replace(string = df$Regional,pattern = "Sup. Estadual Eliana",replacement = "ELIANA PORRINO")
# df$Regional       <- str_replace(string = df$Regional,pattern = "Regional Yrlon",replacement = "YRLON ALVES")
# df$Regional       <- str_replace(string = df$Regional,pattern = "Regional Mirele",replacement = "MIRELE DUARTE")
# df$Regional       <- str_replace(string = df$Regional,pattern = "Regional Helen",replacement = "HELEN CAROLINA")
# df$Regional       <- str_replace(string = df$Regional,pattern = "Regional Dejamile",replacement = "DEJAMILE SOUZA")
# df$Regional       <- str_replace(string = df$Regional,pattern = "Regional Igor",replacement = "IGOR ASSIS")
#
#
#
# df                <- df %>% mutate("Fase do negocio" = ifelse(`Fase do negocio` == "PAGO AO CLIENTE","PAGO",`Fase do negocio`))
# df                <- df %>% mutate("Fase do negocio" = ifelse(`Fase do negocio` == "EM ANÁLISE","EM ANÁLISE",`Fase do negocio`))
# # df                <- df %>% mutate("Origem do Cliente"  = ifelse(`Origem do Cliente` == "","Não identificada",`Origem do Cliente`),
# #                                    "Fonte"              = ifelse(`Contato Fonte` =="",`Lead Fonte`,`Contato Fonte`),
# #                                    "Origem do Cliente1" = ifelse(`Origem do Cliente` == "Fonte" & `Contato Fonte` == "" & `Lead Fonte` == "","Fonte (erro de tabulação)",ifelse(Fonte != "","Fonte",`Origem do Cliente`)),
# #                                    "Data fechado"       = ifelse(Fechado == "Sim",`Data prevista de fechamento`, NA),
# #                                    "Data criado"        = ifelse(`Origem do Cliente1` == "Fonte"| `Origem do Cliente1` =="Não identificada",NA,`Criado em`))
#
# df                <- df %>% mutate("Origem do Cliente"  = ifelse(`Origem do Cliente` == "" | is.na(`Origem do Cliente`) | `Origem do Cliente` == "NA"  ,"Não identificada",`Origem do Cliente`),
#                                    # "Fonte"              = ifelse(`Contato Fonte` =="",`Lead Fonte`,`Contato Fonte`),
#                                    "Origem do Cliente1" = ifelse(!is.na(`Contato Fonte`) ,"Fonte", `Origem do Cliente`),
#                                    "Data fechado"       = ifelse(`Fase do negocio` == "PAGO" | `Fase do negocio` == "DESAFIO",`Data prevista de fechamento`, NA),
#                                    "Data criado"        = ifelse(`Origem do Cliente1` == "Fonte" | `Origem do Cliente1` =="Não identificada",NA,`Data de inicio`))
#
#
#
# #df$`Criado em`         <- as.Date(df$`Criado em`,format = "%d/%m/%Y")
# df$`Data fechado`       <- lubridate::as_date(df$`Data fechado` , format = "%Y-%m-%d %H:%M:%S")
# df$`Data analisar`      <- lubridate::as_date(df$`Data analisar`, format = "%Y-%m-%d %H:%M:%S")
# df$`Data criado`        <- lubridate::as_date(df$`Data criado`, format = "%Y-%m-%d %H:%M:%S")
# df$`Data negociar`      <- lubridate::as_date(df$`Data negociar`, format = "%Y-%m-%d %H:%M:%S")
# df$`Data prospectar`    <- lubridate::as_date(df$`Data prospectar`, format = "%Y-%m-%d %H:%M:%S")
# df$`Data de inicio`     <- lubridate::as_date(df$`Data de inicio`, format = "%Y-%m-%d %H:%M:%S")
# df$`Modificado em`      <- lubridate::as_date(df$`Modificado em` , format = "%Y-%m-%d %H:%M:%S")
df1 <- df
View(df)
runApp()
data = df1
Total <- sum
#as.character(input$visao)
table <- table(data[,c(group_count)],data$`Fase do negocio`)  %>% as.data.frame
Total <- sum
dados <- data %>% dplyr::select(`Data criado`,`Data prospectar`, `Data fechado`, `Data analisar`, `Data negociar`,ID_LEADS) %>%
reshape2::melt(id.vars = "ID_LEADS",measure.vars = c("Data criado","Data prospectar","Data fechado", "Data analisar", "Data negociar")) %>%
mutate("Atributo"      = ifelse(variable == "Data criado","Criou Lead",
ifelse(variable == "Data prospectar","Moveu para prospectando",
ifelse(variable == "Data negociar","Moveu para negociando",
ifelse(variable == "Data analisar","Moveu para em análise",
ifelse(variable == "Data fechado","Fechou lead(Desafio ou pago)",variable))))))
View(df)
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
lubridate::today() - 1
runApp()
runApp()
runApp()
runApp()
shiny::runApp()
runApp()
shiny::runApp()
onedrive_url <- "https://crefaz-my.sharepoint.com/:x:/g/personal/gestaodedados4_crefaz_onmicrosoft_com/EZYuY8kORyJIoTYUo9RwWMABYEkZTA2OXtxrUXnrLef9pQ?download=1"
x1 <- read_url_csv(onedrive_url)
x1
runApp()
runApp()
runApp()
runApp()
onedrive_url <- "https://crefaz-my.sharepoint.com/:x:/g/personal/gestaodedados4_crefaz_onmicrosoft_com/Ea1IGOUCSa1Mjlev_QvrNLAB4I_qcKHjWy908-RxDbWPcQ?download=1"
contatos <<- read_url_csv(url = "https://crefaz-my.sharepoint.com/:x:/g/personal/gestaodedados4_crefaz_onmicrosoft_com/EUJqJfojMwtMilqTonJmeoABp57gRp0UWzWlzdmo_xDLCA?download=1",sep = ";",enc = "latin1")
qtd_contatos_enviados <- contatos %>% dplyr::filter(CELULAR != "(44) 99890-6216") %>% dplyr::summarise(
qtd_filiais   = n(),
qtd_regionais = length(unique(Regional)),
qtd_dir       = qtd_regionais*3)
qtd_contatos_enviados
qtd_contatos_enviados <- contatos %>% dplyr::filter(CELULAR != "(44) 99890-6216") %>% dplyr::summarise(
qtd_filiais   = n(),
qtd_regionais = length(unique(Regional)),
qtd_dir       = 3)
x1$`Qntd. Esperada` <- qtd_contatos_enviados %>% sum
x1
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
df <- read.csv(file = "D:\\OneDrive - Crefaz Financiamentos e Investimentos\\dash_mis_dados\\motor\\motor-agregadado.csv")
View(df)
df_pago <- df %>% dplyr::filter(STATUS_PRINCIPAL == "PAGO AO CLIENTE")
View(df_pago)
df_pago %>% dplyr::filter(DATACADASTRO > "2021-01-01") %>% group_by(PRODUTO) %>% summarise(Producao = sum(VLR_PRODUCAO))
df_pago %>% dplyr::filter(DATACADASTRO > "2021-01-01") %>% group_by(PRODUTO) %>% summarise(Producao = sum(VLR_PRODUCAO)) %>% format(big.mark=".")
df_pago %>% dplyr::filter(DATACADASTRO > "2021-01-01") %>% group_by(PRODUTO) %>% summarise(Producao = sum(VLR_PRODUCAO))
df <- read.csv(file = "D:\\OneDrive - Crefaz Financiamentos e Investimentos\\dash_mis_dados\\motor\\motor-agregadado.csv")
df_pago <- df %>% dplyr::filter(STATUS_PRINCIPAL == "PAGO AO CLIENTE")
df_pago %>% dplyr::filter(DATACADASTRO > "2021-01-01") %>% group_by(PRODUTO) %>% summarise(Producao = sum(VLR_PRODUCAO))
df_pago %>% dplyr::filter(DATACADASTRO > "2021-01-01") %>% group_by(PRODUTO) %>% summarise(Producao = sum(VLR_PRODUCAO),
Qntd     =sum(Qntd_Propostas))
df <- read.csv(file = "D:\\OneDrive - Crefaz Financiamentos e Investimentos\\dash_mis_dados\\motor\\motor-agregadado.csv")
df_pago <- df %>% dplyr::filter(STATUS_PRINCIPAL == "PAGO AO CLIENTE")
df_pago %>% dplyr::filter(DATACADASTRO > "2021-01-01") %>% group_by(PRODUTO) %>% summarise(Producao = sum(VLR_PRODUCAO),
Qntd     =sum(Qntd_Propostas))
df_pago %>% dplyr::filter(DATACADASTRO >= "2021-01-01") %>% group_by(PRODUTO) %>% summarise(Producao = sum(VLR_PRODUCAO),
Qntd     =sum(Qntd_Propostas))
df_pago %>% dplyr::filter(DATACADASTRO >= "2022-01-01") %>% group_by(PRODUTO) %>% summarise(Producao = sum(VLR_PRODUCAO),
Qntd     =sum(Qntd_Propostas))
df$DATACADASTRO <- lubridate::as_date(df$DATACADASTRO)
df$DATA_PAGAMENTO <- lubridate::as_date(df$DATA_PAGAMENTO)
df_pago <- df %>% dplyr::filter(STATUS_PRINCIPAL == "PAGO AO CLIENTE")
df_pago %>% dplyr::filter(DATACADASTRO >= "2022-01-01") %>% group_by(PRODUTO) %>% summarise(Producao = sum(VLR_PRODUCAO),
Qntd     =sum(Qntd_Propostas))
df_pago %>% dplyr::filter(DATA_PAGAMENTO >= "2022-01-01") %>% group_by(PRODUTO) %>% summarise(Producao = sum(VLR_PRODUCAO),
Qntd     =sum(Qntd_Propostas))
df_pago %>% dplyr::filter(DATA_PAGAMENTO >= "2021-01-01") %>% group_by(PRODUTO) %>% summarise(Producao = sum(VLR_PRODUCAO),
Qntd     =sum(Qntd_Propostas))
df <- read.csv(file = "D:\\OneDrive - Crefaz Financiamentos e Investimentos\\dash_mis_dados\\motor\\motor-agregadado.csv")
df$DATACADASTRO <- lubridate::as_date(df$DATACADASTRO)
df$DATA_PAGAMENTO <- lubridate::as_date(df$DATA_PAGAMENTO)
df_pago <- df %>% dplyr::filter(STATUS_PRINCIPAL == "PAGO AO CLIENTE")
df_pago %>% dplyr::filter(DATA_PAGAMENTO >= "2021-01-01") %>% group_by(PRODUTO) %>% summarise(Producao = sum(VLR_PRODUCAO),
Qntd     =sum(Qntd_Propostas))
df <- read.csv(file = "D:\\OneDrive - Crefaz Financiamentos e Investimentos\\dash_mis_dados\\motor\\motor-agregadado.csv")
df$DATACADASTRO <- lubridate::as_date(df$DATACADASTRO)
df$DATA_PAGAMENTO <- lubridate::as_date(df$DATA_PAGAMENTO)
df_pago <- df %>% dplyr::filter(STATUS_PRINCIPAL == "PAGO AO CLIENTE")
df_pago %>% dplyr::filter(DATA_PAGAMENTO >= "2021-01-01") %>% group_by(PRODUTO) %>% summarise(Producao = sum(VLR_PRODUCAO),
Qntd     =sum(Qntd_Propostas))
df <- read.csv(file = "D:\\OneDrive - Crefaz Financiamentos e Investimentos\\dash_mis_dados\\motor\\motor-agregadado.csv")
df$DATACADASTRO <- lubridate::as_date(df$DATACADASTRO)
df$DATA_PAGAMENTO <- lubridate::as_date(df$DATA_PAGAMENTO)
df$ANO_CADASTRO <- lubridate::year(df$DATACADASTRO)
df$ANO_PAGAMENTO <- lubridate::year(df$DATA_PAGAMENTO)
df$MES_CADASTRO <- lubridate::month(df$DATACADASTRO)
df$MES_PAGAMENTO <- lubridate::month(df$DATA_PAGAMENTO)
df_pago <- df %>% dplyr::filter(STATUS_PRINCIPAL == "PAGO AO CLIENTE")
df_pago %>% dplyr::filter(DATA_PAGAMENTO >= "2021-01-01") %>% group_by(PRODUTO,ANO_PAGAMENTO,MES_PAGAMENTO) %>% summarise(Producao = sum(VLR_PRODUCAO),
Qntd     =sum(Qntd_Propostas))
df_pago %>% dplyr::filter(DATA_PAGAMENTO >= "2021-01-01") %>% dplyr::group_by(PRODUTO,ANO_PAGAMENTO,MES_PAGAMENTO) %>% summarise(Producao = sum(VLR_PRODUCAO),
Qntd     =sum(Qntd_Propostas))
df_pago %>% dplyr::filter(DATA_PAGAMENTO >= "2021-01-01") %>% dplyr::group_by(PRODUTO,ANO_PAGAMENTO,MES_PAGAMENTO) %>% mutate(Producao = sum(VLR_PRODUCAO),
Qntd     =sum(Qntd_Propostas))
df_pago %>% dplyr::filter(DATA_PAGAMENTO >= "2021-01-01") %>% dplyr::group_by(PRODUTO,ANO_PAGAMENTO,MES_PAGAMENTO) %>% summarise(Producao = sum(VLR_PRODUCAO),
Qntd     =sum(Qntd_Propostas))
df_pago %>% dplyr::filter(DATA_PAGAMENTO >= "2021-01-01") %>% dplyr::group_by("PRODUTO","ANO_PAGAMENTO","MES_PAGAMENTO") %>% summarise(Producao = sum(VLR_PRODUCAO),
Qntd     =sum(Qntd_Propostas))
df_pago %>% dplyr::filter(DATA_PAGAMENTO >= "2021-01-01") %>% dplyr::group_by("PRODUTO","ANO_PAGAMENTO","MES_PAGAMENTO") %>% dplyr::summarise(Producao = sum(VLR_PRODUCAO),
Qntd     =sum(Qntd_Propostas))
df_pago %>% dplyr::filter(DATA_PAGAMENTO >= "2021-01-01") %>% dplyr::group_by(PRODUTO,ANO_PAGAMENTO,MES_PAGAMENTO) %>% dplyr::summarise(Producao = sum(VLR_PRODUCAO),
Qntd     =sum(Qntd_Propostas))
df_pago %>% dplyr::filter(DATA_PAGAMENTO >= "2021-01-01") %>% dplyr::group_by(PRODUTO) %>% dplyr::summarise(Producao = sum(VLR_PRODUCAO),
Qntd     =sum(Qntd_Propostas))
df_pago %>% dplyr::filter(DATA_PAGAMENTO >= "2021-01-01") %>% dplyr::group_by(DATA_PAGAMENTO) %>% dplyr::summarise(Producao = sum(VLR_PRODUCAO),
Qntd     =sum(Qntd_Propostas))
df_pago %>% dplyr::filter(DATA_PAGAMENTO >= "2021-01-01") %>% dplyr::group_by(DATA_PAGAMENTO) %>% dplyr::summarise(Producao = sum(VLR_PRODUCAO),
Qntd     =sum(Qntd_Propostas)) %>%
ggplot(aes(x = DATA_PAGAMENTO,y=Producao)) +
geom_point()+
geom_line()
df_pago %>%  dplyr::group_by(DATA_PAGAMENTO) %>% dplyr::summarise(Producao = sum(VLR_PRODUCAO),
Qntd     =sum(Qntd_Propostas)) %>%
ggplot(aes(x = DATA_PAGAMENTO,y=Producao)) +
geom_point()+
geom_line()
df_pago %>%  dplyr::group_by(DATA_PAGAMENTO) %>% dplyr::summarise(Producao = sum(VLR_PRODUCAO),
Qntd     =sum(Qntd_Propostas)) %>%
ggplot(aes(x = DATA_PAGAMENTO,y=Producao)) +
geom_point()+
geom_line() +
geom_point(aes(x = DATA_PAGAMENTO,y=Qntd))+
geom_line(aes(x = DATA_PAGAMENTO,y=Qntd))
df_pago %>%  dplyr::group_by(DATA_PAGAMENTO) %>% dplyr::summarise(Producao = sum(VLR_PRODUCAO),
Qntd     =sum(Qntd_Propostas)) %>%
ggplot(aes(x = DATA_PAGAMENTO,y=Producao)) +
geom_point()+
geom_line()
df_pago %>%  dplyr::group_by(DATA_PAGAMENTO) %>% dplyr::summarise(Producao = sum(VLR_PRODUCAO),
Qntd     =sum(Qntd_Propostas)) %>%
ggplot(aes(x = DATA_PAGAMENTO,y=Producao)) +
geom_point()
df_pago %>%  dplyr::group_by(DATA_PAGAMENTO) %>% dplyr::summarise(Producao = sum(VLR_PRODUCAO),
Qntd     =sum(Qntd_Propostas)) %>%
ggplot(aes(x = DATA_PAGAMENTO,y=Producao)) +
geom_point() +
geom_line()
df_pago %>%  dplyr::group_by(DATA_PAGAMENTO) %>% dplyr::summarise(Producao = sum(VLR_PRODUCAO),
Qntd     =sum(Qntd_Propostas)) %>%
ggplot(aes(x = DATA_PAGAMENTO,y=Producao)) +
geom_point() +
geom_line() +
geom_smooth(stat = "loess")
df_pago %>%  dplyr::group_by(DATA_PAGAMENTO) %>% dplyr::summarise(Producao = sum(VLR_PRODUCAO),
Qntd     =sum(Qntd_Propostas)) %>%
ggplot(aes(x = DATA_PAGAMENTO,y=Producao)) +
geom_point() +
geom_line() +
geom_smooth(method = "gam")
df_pago %>%  dplyr::group_by(DATA_PAGAMENTO) %>% dplyr::summarise(Producao = sum(VLR_PRODUCAO),
Qntd     =sum(Qntd_Propostas)) %>%
ggplot(aes(x = DATA_PAGAMENTO,y=Producao)) +
geom_point() +
geom_line() +
geom_smooth(method = "gam")+
geom_smooth(method = "loess")
df_pago %>%  dplyr::group_by(DATA_PAGAMENTO) %>% dplyr::summarise(Producao = sum(VLR_PRODUCAO),
Qntd     =sum(Qntd_Propostas)) %>%
ggplot(aes(x = DATA_PAGAMENTO,y=Producao)) +
geom_point() +
geom_line() +
geom_smooth(method = "gam",se = TRUE)+
geom_smooth(method = "loess")
df_pago %>%  dplyr::group_by(DATA_PAGAMENTO) %>% dplyr::summarise(Producao = sum(VLR_PRODUCAO),
Qntd     =sum(Qntd_Propostas)) %>%
ggplot(aes(x = DATA_PAGAMENTO,y=Producao)) +
geom_point() +
geom_line() +
geom_smooth(method = "gam",se = TRUE)+
geom_smooth(method = "loess",span = 0.5)
df_pago %>%  dplyr::group_by(DATA_PAGAMENTO) %>% dplyr::summarise(Producao = sum(VLR_PRODUCAO),
Qntd     =sum(Qntd_Propostas)) %>%
ggplot(aes(x = DATA_PAGAMENTO,y=cumsum(Producao))) +
geom_point() +
geom_line() +
geom_smooth(method = "gam",se = TRUE)+
geom_smooth(method = "loess",span = 0.5)
df_pago %>%  dplyr::group_by(DATA_PAGAMENTO) %>% dplyr::summarise(Producao = sum(VLR_PRODUCAO),
Qntd     =sum(Qntd_Propostas)) %>%
ggplot(aes(x = DATA_PAGAMENTO,y=Producao)) +
geom_point() +
geom_line() +
geom_smooth(method = "gam",se = TRUE)+
geom_smooth(method = "loess",span = 0.5)
df_pago %>%  dplyr::group_by(DATA_PAGAMENTO,PRODUTO) %>% dplyr::summarise(Producao = sum(VLR_PRODUCAO),
Qntd     =sum(Qntd_Propostas)) %>%
ggplot(aes(x = DATA_PAGAMENTO,y=Producao, group = PRODUTO)) +
geom_point() +
geom_line() +
geom_smooth(method = "gam",se = TRUE)+
geom_smooth(method = "loess",span = 0.5)
df_pago %>%  dplyr::group_by(DATA_PAGAMENTO,PRODUTO) %>% dplyr::summarise(Producao = sum(VLR_PRODUCAO),
Qntd     =sum(Qntd_Propostas)) %>%
ggplot(aes(x = DATA_PAGAMENTO,y=Producao, color = PRODUTO)) +
geom_point() +
geom_line() +
geom_smooth(method = "gam",se = TRUE)+
geom_smooth(method = "loess",span = 0.5)
df_pago %>%  dplyr::group_by(DATA_PAGAMENTO) %>% dplyr::summarise(Producao = sum(VLR_PRODUCAO),
Qntd     =sum(Qntd_Propostas)) %>%
ggplot(aes(x = DATA_PAGAMENTO,y=Producao, color = PRODUTO)) +
geom_point() +
geom_line() +
geom_smooth(method = "gam",se = TRUE)+
geom_smooth(method = "loess",span = 0.5)
df_pago %>%  dplyr::group_by(DATA_PAGAMENTO) %>% dplyr::summarise(Producao = sum(VLR_PRODUCAO),
Qntd     =sum(Qntd_Propostas)) %>%
ggplot(aes(x = DATA_PAGAMENTO,y=Producao)) +
geom_point() +
geom_line() +
geom_smooth(method = "gam",se = TRUE)+
geom_smooth(method = "loess",span = 0.5)
df_pago %>%  dplyr::group_by(DATA_PAGAMENTO) %>% dplyr::summarise(Producao = sum(VLR_PRODUCAO),
Qntd     =sum(Qntd_Propostas)) %>%
ggplot(aes(x = DATA_PAGAMENTO,y=Producao)) +
geom_point() +
geom_line() +
geom_smooth(method = "gam",se = TRUE)
df_pago %>%  dplyr::group_by(DATA_PAGAMENTO,PRODUTO) %>% dplyr::summarise(Producao = sum(VLR_PRODUCAO),
Qntd     =sum(Qntd_Propostas)) %>%
ggplot(aes(x = DATA_PAGAMENTO,y=Producao, color = PRODUTO)) +
geom_point() +
geom_line() +
geom_smooth(method = "gam",se = TRUE)+
geom_smooth(method = "loess",span = 0.5)
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
df_pago  %>% dplyr::summarise(Producao = sum(VLR_PRODUCAO),
df_pago  %>% dplyr::summarise(Producao = sum(VLR_PRODUCAO),
Qntd     =sum(Qntd_Propostas))
df_pago  %>% dplyr::summarise(Producao = sum(VLR_PRODUCAO),
Qntd     =sum(Qntd_Propostas))
df_pago  %>% dplyr::summarise(Producao = sum(VLR_PRODUCAO),
Qntd     =sum(Qntd_Propostas))
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
prod_mes_atual <- df_pago %>% dplyr::filter( (ANO_PAGAMENTO==ano_atual)  & (MES_PAGAMENTO==mes_atual))   %>% dplyr::summarise(Producao = sum(VLR_PRODUCAO),
Qntd     =sum(Qntd_Propostas))
mes_atual <- lubridate::month(lubridate::today())
ano_atual <- lubridate::year(lubridate::today())
prod_mes_atual <- df_pago %>% dplyr::filter( (ANO_PAGAMENTO==ano_atual)  & (MES_PAGAMENTO==mes_atual))   %>% dplyr::summarise(Producao = sum(VLR_PRODUCAO),
Qntd     =sum(Qntd_Propostas))
prod_mes_atual
runApp()
runApp()
